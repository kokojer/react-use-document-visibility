{"version":3,"file":"react-use-document-visibility.modern.js","sources":["../src/hook.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\ninterface TypesHook {\r\n  counter: number;\r\n  visible: boolean;\r\n  onVisibilityChange: (callback: (isVisible: boolean) => void) => void;\r\n}\r\n\r\nconst callbacks: Array<(isVisible: boolean) => void> = [];\r\nexport const useDocumentVisibility = (): TypesHook => {\r\n  const [counter, setCounter] = useState(0);\r\n  const [visible, setVisible] = useState(true);\r\n  const onVisibilityChange = (callback: (isVisible: boolean) => void) => {\r\n    callbacks.push(callback);\r\n  };\r\n  useEffect(() => {\r\n    const handlerVisibilityChange = (): void => {\r\n      document.visibilityState === \"visible\"\r\n        ? setVisible(true)\r\n        : setVisible(false);\r\n      if (document.hidden) {\r\n        setCounter((counter) => counter + 1);\r\n      }\r\n      callbacks.forEach((callback) => {\r\n        callback(document.visibilityState === \"visible\");\r\n      });\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handlerVisibilityChange);\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", handlerVisibilityChange);\r\n      callbacks.splice(0, callbacks.length);\r\n    };\r\n  }, []);\r\n  return {\r\n    counter,\r\n    visible,\r\n    onVisibilityChange,\r\n  };\r\n};\r\n"],"names":["callbacks","useDocumentVisibility","counter","setCounter","useState","visible","setVisible","useEffect","handlerVisibilityChange","document","visibilityState","hidden","forEach","callback","addEventListener","removeEventListener","splice","length","onVisibilityChange","push"],"mappings":"gDAQA,MAAeA,EAAwC,GAC1CC,EAAwB,KACnC,MAAOC,EAASC,GAAcC,EAAS,IAChCC,EAASC,GAAcF,GAAS,GAsBvC,OAlBAG,EAAU,KACR,MAAMC,EAA0B,KACD,YAA7BC,SAASC,gBACLJ,GAAW,GACXA,GAAW,GACXG,SAASE,QACXR,EAAYD,GAAYA,EAAU,GAEpCF,EAAUY,QAASC,IACjBA,EAAsC,YAA7BJ,SAASC,oBAItB,OADAD,SAASK,iBAAiB,mBAAoBN,GACvC,KACLC,SAASM,oBAAoB,mBAAoBP,GACjDR,EAAUgB,OAAO,EAAGhB,EAAUiB,UAE/B,IACI,CACLf,UACAG,UACAa,mBAxB0BL,IAC1Bb,EAAUmB,KAAKN"}