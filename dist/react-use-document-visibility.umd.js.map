{"version":3,"file":"react-use-document-visibility.umd.js","sources":["../src/hook.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\ntype Callback = (isVisible: boolean) => void;\r\ninterface TypesHook {\r\n  counter: number;\r\n  visible: boolean;\r\n  onVisibilityChange: (callback: Callback) => void;\r\n}\r\n\r\nexport const useDocumentVisibility = (): TypesHook => {\r\n  const [counter, setCounter] = useState(0);\r\n  const [visible, setVisible] = useState(true);\r\n  const [callbacks, setCallbacks] = useState([]);\r\n\r\n  const onVisibilityChange = (callback: Callback) => {\r\n    setCallbacks((callbacks: Array<Callback>) => [...callbacks, callback]);\r\n  };\r\n  useEffect(() => {\r\n    const handlerVisibilityChange = (): void => {\r\n      setVisible(document.visibilityState === \"visible\");\r\n      if (document.hidden) {\r\n        setCounter((counter) => counter + 1);\r\n      }\r\n      callbacks.forEach((callback) => {\r\n        callback(document.visibilityState === \"visible\");\r\n      });\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handlerVisibilityChange);\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", handlerVisibilityChange);\r\n      callbacks.splice(0, callbacks.length);\r\n    };\r\n  }, [callbacks]);\r\n  return {\r\n    counter,\r\n    visible,\r\n    onVisibilityChange,\r\n  };\r\n};\r\n"],"names":["useState","counter","_useState","setCounter","_useState2","visible","setVisible","callbacks","_useState3","setCallbacks","useEffect","handlerVisibilityChange","document","visibilityState","hidden","forEach","callback","addEventListener","removeEventListener","splice","length","onVisibilityChange","concat"],"mappings":"+SAQqC,WACnC,MAA8BA,EAAQA,SAAC,GAAhCC,EAAPC,EAAA,GAAgBC,EAChBD,EAAA,GAAAE,EAA8BJ,YAAS,GAAhCK,EAASC,EAAAA,GAAAA,OACkBN,EAAAA,EAAQA,SAAC,IAApCO,EAAPC,EAAA,GAAkBC,EAAlBD,EAAA,GAqBA,OAhBAE,EAASA,UAAC,WACR,IAA6BC,EAAG,WAC9BL,EAAwC,YAA7BM,SAASC,iBAChBD,SAASE,QACXX,EAAW,SAACF,GAAYA,OAAAA,EAAU,IAEpCM,EAAUQ,QAAQ,SAACC,GACjBA,EAAsC,YAA7BJ,SAASC,oBAItB,OADAD,SAASK,iBAAiB,mBAAoBN,GACvC,WACLC,SAASM,oBAAoB,mBAAoBP,GACjDJ,EAAUY,OAAO,EAAGZ,EAAUa,UAE/B,CAACb,IACG,CACLN,QAAAA,EACAI,QAAAA,EACAgB,mBAtByB,SAACL,GAC1BP,EAAa,SAACF,GAAD,MAAA,GAAAe,OAAoCf,EAAWS,CAAAA"}